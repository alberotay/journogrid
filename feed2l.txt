<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noticias RSS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f5f5f5;
        }
        
        .container {
            width: 80%;
            max-width: 800px;
            margin-top: 20px;
        }
        
        .news-column {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .news-item {
            opacity: 1;
            transition: transform 1s ease-in-out, opacity 1s ease-in-out;
            background-color: #fff;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transform: translateY(0);
        }

        .news-item-exit {
            opacity: 0;
            transform: translateY(-100%);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="news-column" id="newsColumn">
            <!-- Aquí se agregarán dinámicamente las noticias -->
        </div>
    </div>

    <script>
        async function fetchRSS() {
            const response = await fetch('https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/portada');
            const data = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(data, 'text/xml');
            const items = xmlDoc.querySelectorAll('item');
            const newsColumn = document.getElementById('newsColumn');

            const maxNewsToShow = 5;
            const newsInterval = 5000; // 5 segundos

            let currentNewsIndex = 0;

            function updateNews() {
                const currentNewsItems = newsColumn.querySelectorAll('.news-item');

                if (currentNewsItems.length >= maxNewsToShow) {
                    const oldNewsItem = currentNewsItems[0];
                    oldNewsItem.style.opacity = '0';
                    oldNewsItem.style.transform = 'translateY(-100%)';
                    setTimeout(() => {
                        oldNewsItem.remove();
                    }, 1000);
                }

                const newIndex = currentNewsIndex % items.length;
                const item = items[newIndex];
                const title = item.querySelector('title').textContent;
                const link = item.querySelector('link').textContent;
                const description = item.querySelector('description').textContent;

                const newsItem = document.createElement('div');
                newsItem.classList.add('news-item');
                newsItem.style.opacity = '0';
                newsItem.style.transform = 'translateY(100%)';
                newsItem.innerHTML = `
                    <h2><a href="${link}" target="_blank">${title}</a></h2>
                    <p>${description}</p>
                `;

                newsColumn.appendChild(newsItem);

                setTimeout(() => {
                    newsItem.style.opacity = '1';
                    newsItem.style.transform = 'translateY(0)';
                }, 100);

                currentNewsIndex++;
            }

            // Fetch and update news every 5 seconds
            updateNews();
            setInterval(updateNews, newsInterval + 1000);
        }

        fetchRSS();
    </script>
</body>
</html>
